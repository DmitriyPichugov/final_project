# StroyBase — Веб‑приложение для магазина стройматериалов

> **Коротко:** веб‑приложение интернет‑магазина строительных материалов,  Приложение на Django с каталогом товаров, корзиной, оформлением заказа, профилем пользователя и админкой.

---

## Содержание

1. [Обзор проекта](#обзор-проекта)
2. [Что увидит пользователь](#что-увидит-пользователь)
3. [Архитектура и схемы взаимодействия](#архитектура-и-схемы-взаимодействия)
4. [Описание задач](#описание-задач)
5. [Оценка времени и план работ](#оценка-времени-и-план-работ)
6. [Распределение ролей](#распределение-ролей)

---

## Обзор проекта

**Название:** StroyBase

**Цель:** создать удобный интернет-магазин для продажи стройматериалов, с возможностью управления каталогом, оформления заказов и базовым пользовательским профилем.

### **Ключевые требования:**

- **Каталог**: поддержка древовидной структуры категорий для удобной навигации по товарам.  
- **Поиск и фильтрация**: быстрый поиск и фильтры по параметрам товара.  
- **Корзина**: добавление товаров, изменение количества и автоматический пересчет итоговой стоимости.  
- **Оформление заказа**: ввод контактных данных и адреса доставки.
- **Авторизация**: регистрация по почте, вход и выход.  
- **Управление заказами**: личный кабинет с историей заказов и возможностью просмотра статуса каждого.  
- **Админ-панель**: управление товарами, категориями и заказами через стандартный интерфейс Django Admin.  
- **Docker-окружение**: контейнеризация приложения для легкого запуска и развертывания.  
- **Адаптивный дизайн**: интерфейс на Bootstrap, корректно отображается на телефонах, планшетах и десктопах.  
- **Статические файлы**: собственные CSS-стили, JavaScript и набор иконок для улучшения UX.  


---

## Что увидит пользователь

### Главная страница
- Основные кнопки: "Каталог" и "Корзина".
- Информация о компании (контакты, преимущества, акции).

### Каталог
- Отображение всех товаров или товаров выбранной категории.
- Карточки товаров с:
  - Названием
  - Кратким описанием
  - Кнопкой "Добавить в корзину"
  - Ценой
- Поддержка пагинации для переключения страниц.
- Фильтры:
  - Товары по акции
  - Сортировка по параметрам (цена, популярность и т.д.)

### Корзина
- Просмотр выбранных товаров с количеством и итоговой стоимостью.
- Возможность редактировать количество и удалять позиции.

### Поиск
- Полнотекстовый поиск по товарам.
- Сохранение истории поиска.
- Автоподсказки при вводе запроса.

### Авторизация
- Вход по имени пользователя и паролю.
- Регистрация нового аккаунта с указанием:
  - Имени
  - Фамилии
  - Адреса электронной почты

### Личный кабинет
- Профиль прользователя с основной информацией и возомжностью редактирования
- Корзина
- Отслеживание заказов

### Админ-панель:
* CRUD для товаров/категорий/заказов/пользователей.

---

## Архитектура и схемы взаимодействия

### 1) Схема проекта

```
├── carts                 # Приложение для работы с корзиной
│   ├── __init__.py       # Инициализация модуля Python
│   ├── admin.          # Настройка отображения корзины в админке
│   ├── apps.py           # Конфигурация приложения
│   ├── migrations        # Миграции базы данных для корзины
│   │   └── __init__.py
│   ├── mixins.py         # Миксины для повторно используемой логики корзины
│   ├── models.py         # Модели корзины (элементы, связи с пользователем)
│   ├── templates         # Шаблоны для корзины
│   │   └── carts
│   │       └── includes
│   │           └── included_cart.html  # Включаемый шаблон для отображения корзины
│   ├── templatetags
│   │   ├── __init__.py
│   │   └── carts_tags.py # Пользовательские теги Django для корзины
│   ├── tests.py          # Тесты для функционала корзины
│   ├── urls.py           # URL маршруты для корзины
│   ├── utils.py          # Вспомогательные функции
│   └── views.py          # Представления (views) корзины
├── common                # Общие утилиты и миксины, используемые в разных приложениях
│   └── mixins.py
├── StroyBase             # Основная директория проекта Django
│   ├── __init__.py
│   ├── asgi.py           # ASGI-конфигурация для асинхронного сервера
│   ├── settings.py       # Настройки проекта (БД, статика, apps)
│   ├── urls.py           # Основная маршрутизация URL
│   └── wsgi.py           # WSGI-конфигурация для сервера
├── docker-compose.yml    # Конфигурация Docker Compose для всего окружения
├── Dockerfile            # Dockerfile для веб-приложения
├── fixtures              # Начальные данные для базы (seed)
│   └── goods
│       ├── categories.json
│       └── products.json
├── goods                 # Приложение для товаров и категорий
│   ├── __init__.py
│   ├── admin.py          # Настройка товаров в админке
│   ├── apps.py
│   ├── migrations
│   │   └── __init__.py
│   ├── models.py         # Модели товаров и категорий
│   ├── templates
│   │   └── goods
│   │       ├── catalog.html  # Страница каталога товаров
│   │       └── product.html  # Страница отдельного товара
│   ├── templatetags
│   │   ├── __init__.py
│   │   └── goods_tags.py     # Пользовательские теги Django для товаров
│   ├── tests.py
│   ├── urls.py
│   ├── utils.py
│   └── views.py          # Представления каталога и товаров
├── main                  # Основное приложение для главной страницы и статических страниц
│   ├── __init__.py
│   ├── admin.py
│   ├── apps.py
│   ├── migrations
│   │   └── __init__.py
│   ├── models.py
│   ├── templates
│   │   └── main
│   │       ├── about.html    # Страница "О компании"
│   │       └── index.html    # Главная страница
│   ├── tests.py
│   ├── urls.py
│   └── views.py
├── manage.py             # Скрипт для управления проектом (runserver, migrate и т.д.)
├── media                 # Папка для загружаемых пользователями файлов (gitignore)
├── orders                # Приложение для работы с заказами
│   ├── __init__.py
│   ├── admin.py
│   ├── apps.py
│   ├── forms.py          # Формы для создания заказа
│   ├── migrations
│   │   └── __init__.py
│   ├── models.py         # Модели заказов
│   ├── templates
│   │   └── orders
│   │       └── create_order.html  # Шаблон страницы оформления заказа
│   ├── tests.py
│   ├── urls.py
│   └── views.py          # Представления для заказов
├── requirements.txt      # Список зависимостей Python
├── static                # Статические файлы (CSS, JS, изображения, иконки)
│   └── deps
│       ├── css
│       ├── favicon
│       ├── icons
│       ├── images
│       └── js
│           ├── bootstrap
│           └── jquery
├── staticfiles           # Собранные статику для production
├── templates             # Общие шаблоны проекта
│   ├── base.html         # Базовый шаблон с навигацией и футером
│   └── includes          # Включаемые шаблоны
│       ├── cart_button.html    # Кнопка корзины для навигации
│       └── notifications.html  # Системные уведомления
└── users                 # Приложение для работы с пользователями
    ├── __init__.py
    ├── admin.py
    ├── apps.py
    ├── forms.py          # Формы регистрации, редактирования профиля
    ├── migrations
    │   └── __init__.py
    ├── models.py         # Пользовательские моделиgj
    ├── templates
    │   └── users
    │       ├── login.html
    │       ├── profile.html
    │       ├── registration.html
    │       └── users_cart.html  # Просмотр корзины пользователя
    ├── tests.py
    ├── urls.py
    └── views.py          # Представления для аутентификации и профиля

```

### 2) Диаграмма взаимодействия пользователей и компонентов
```
[Пользователь] 
      |
      v
[Веб-интерфейс Django] --- HTTP запросы ---> [Views]
      |                                         |
      v                                         v
[Templates] <--- данные из моделей --- [Models / ORM]
      |
      v
[База данных PostgreSQL]  <--->  [ORM Django]
```
* Пользователь делает запрос через браузер.
* Views обрабатывают запрос и взаимодействуют с моделями (ORM).
* Модели получают/сохраняют данные в PostgreSQL.
* Templates отображают данные пользователю.
* Статические файлы (CSS/JS/иконки) улучшают UX.

### 3) Схема модулей и их взаимодействие
```
+----------------+
|  Пользователь  |
+----------------+
         |
         v
+----------------+      +----------------+      +----------------+
| Каталог/Поиск  | ---> |     Корзина    | ---> |   Оформление   |
+----------------+      +----------------+      +----------------+
         |                       |
         v                       v
   +-------------+        +------------+
   |Goods/Catalog|        |  Order App |
   +-------------+        +------------+
         |                     |
         +-----------+---------+
                     v
            +----------------+
            |   База данных  |
            +----------------+

```
* Каталог обращается к Goods/Catalog для получения товаров.
* Корзина использует данные товаров и хранит временные заказы.
* Оформление заказа сохраняет информацию в Order App.
* Все данные хранятся в базе PostgreSQL.


---

## Описание задач
* Настроить проект Django и Docker-окружение.
* Разработать модели товаров, категорий, пользователей и заказов.
* Реализовать каталог с поиском и фильтрацией.
* Реализовать корзину с редактированием и пересчетом стоимости.
* Реализовать оформление заказа с сохранением данных в базе.
* Настроить регистрацию, вход.
* Настроить админ-панель для CRUD операций.
* Подключить статические файлы, Bootstrap и иконки.
* Разработать шаблоны для всех страниц (главная, каталог, корзина, профиль).
* Провести тестирование всех модулей и интеграций.

---

### Оценка времени и план работы

| Задача                      | Время   |
| --------------------------- | ------- |
| Настройка проекта и Docker  | 0.5 дня |
| Разработка моделей          | 1-2 дня |
| Каталог и поиск             | 2 дня   |
| Корзина                     | 1 день  |
| Оформление заказа           | 1 день  |
| Авторизация и регистрация   | 1 день  |
| Админ-панель                | 0.5 дня |
| Статические файлы и шаблоны | 2 дня   |
| Тестирование                | 1 день  |
| Исправление возможных ошибок| 2 дня   |

---

### Распределение ролей

| Роль                   | Задачи |
|------------------------|--------|
| Лид-разработчик         | Настройка проекта и Docker, разработка моделей, каталог и поиск, авторизация и регистрация, админ-панель, тестирование, исправление возможных ошибок |
| Разработчик             | Статические файлы и шаблоны, корзина, оформление заказа, участие в тестировании и исправлении ошибок по необходимости |

### Схема БД
List of relations
 Schema |          Name          | Type  |       Owner       
--------+------------------------+-------+-------------------
 public | auth_group             | table | desdistrict_admin
 public | auth_group_permissions | table | desdistrict_admin
 public | auth_permission        | table | desdistrict_admin
 public | cart                   | table | desdistrict_admin
 public | category               | table | desdistrict_admin
 public | django_admin_log       | table | desdistrict_admin
 public | django_content_type    | table | desdistrict_admin
 public | django_migrations      | table | desdistrict_admin
 public | django_session         | table | desdistrict_admin
 public | order                  | table | desdistrict_admin
 public | order_item             | table | desdistrict_admin
 public | product                | table | desdistrict_admin
 public | product_category       | table | desdistrict_admin
 public | user                   | table | desdistrict_admin
 public | user_groups            | table | desdistrict_admin
 public | user_user_permissions  | table | desdistrict_admin
 
### Документация по базе данных в проекте

В этом проекте используется PostgreSQL в качестве базы данных, которая управляется через Django ORM. В базе данных хранятся все необходимые таблицы для работы с пользователями, товарами, заказами и сессиями.

### Структура базы данных

#### Список таблиц:

1. auth_group
   Таблица для хранения групп пользователей. Каждая группа может содержать несколько пользователей.

2. auth_group_permissions
   Связующая таблица для групп и разрешений, предоставляемых группе.

3. auth_permission
   Таблица для хранения прав доступа, которые могут быть назначены пользователям и группам.

4. cart
   Таблица для хранения информации о корзине покупок пользователей.

5. category
   Таблица для хранения категорий товаров.

6. django_admin_log
   Логирование действий администратора.

7. django_content_type
   Таблица, которая используется для хранения типов моделей в Django (для реализации системы разрешений).

8. django_migrations
   Хранит информацию о применённых миграциях.

9. django_session
   Хранение сессий пользователей, включая сессионные данные.

10. order
    Таблица для хранения информации о заказах пользователей.

11. order_item
    Хранит товары, входящие в заказы (детализированная информация о каждом товаре в заказе).

12. product
    Таблица для хранения информации о товарах.

13. product_category
    Связующая таблица для товаров и категорий (многие ко многим).

14. user
    Таблица для хранения информации о пользователях, таких как имя, email, пароли и другие данные.

15. user_groups
    Связующая таблица между пользователями и группами.

16. user_user_permissions
    Связующая таблица между пользователями и их разрешениями.

    ---

1. Связь "многие ко многим" между товарами и категориями
   Таблица product_category позволяет товарам принадлежать сразу нескольким категориям, и категориям содержать несколько товаров

2. Связь между пользователями и группами
   Таблица user_groups содержит связь между пользователями и группами. Пользователи могут быть членами нескольких групп

3. Система сессий
   Таблица django_session используется для хранения сессионных данных пользователе

4. Заказы
   Таблицы order и order_item описывают структуру заказов: order хранит общие данные о заказе, а order_item — данные о каждом товаре, который был добавлен в заказ

   
### лид разработчик
#### 1. Настройка проекта и docker
* инициализировал django проект StroyBase
    * создал базовую структуру проекта StroyBase/, manage.py, основные приложения
    * подключил goods, orders, carts, users, main в StroyBase/settings.py чтобы сразу была понятная архитектура
* настроил подключение к postgreSQL
    * прописал параметры базы данных в settings.py
    * проверил что миграции проходят корректно и проект стабильно поднимается
* подготовил docker окружение для удобного запуска проекта
    * написал Dockerfile для веб приложения
        * python образ
        * устанвка зависимостей из requirements.txt
        * рабочая директория
        * команда запуска django
    * настроил docker-compose.yml
        * контейнер с django приложением
        * отдельный контейнер с postgreSQL
#### 2. Модели и бизнес логика
* спроектировал и реализовал основные модели домена
    1. товары и категории goods/models.py
        * модель категории
        * модель товара
            * название описание цена количетсво в наличии
            * связь с одной или несколькими категориями
            * флаги для скидок
            * поля под медиа изображения и другие файлы
    2. пользователи users/models.py
        * расширил профиль пользователя
        * добавил имя фамилию телефон для хранения базовой информации
    3. заказы orders/models.py
        * модель заказа
            * пользователь телефон адрес доставки или самовывоза
            * статус заказа и итоговая сумма
        * модель позиций заказа
            * связь с заказом и товаром
            * количество
            * цена товара на момент покупки
#### 3. Корзина
* продумал и реализовал логику корзины в приложении carts
    * описал модели в carts/models.py
        * связь корзины с пользоателем или сессией
        * позиции корзины товар количество цена
        * при добавлении одинакового товара увеличивается количество а не создается новая запись
        * хранение и пересчет общей стоимости корзины
* реализовал серверную логику работы корзины
    * carts/utils.py и carts/mixins.py
        * добавление товара в корзину
        * изменение количества
        * удаления позиции
        * пересчет итоговой суммы
#### 4. Каталог и поиск
* реализовал каталог товаров в приложении goods
    * контроллеры в goods/views.py
        * вывод списка товаров по категориям
        * отображение отдельной карточки товара
    * базовая работа с orm для фильтрации по категориям и состоянию товара
* настроил базовый поиск по товарам
    * обработка поискового запроса на стороне бэкенда
    * поиск по названию описанию и другим полям
    * фильтрация через orm
#### 5. Регистрация и авторизация
* настроил систему аутентификации в приложении users
    * регистрация по email или логину
        * формы в users/forms.py
        * валидация паролей и уникалности данных
    * вход и выход пользователя
        * users/views.py
        * users/urls.py
* связал аутентификацию с шаблонами
    * users/templates/users/login.html
    * users/templates/users/registration.html
* обеспечил связку пользователя с профилем корзиной и заказами чтобы данные не терялись
#### 6. Админ панель
* настроил django admin для управления системой
    * goods/admin.py
        * список товаров
        * фильтры
        * поиск по полям
        * редактирование категорий и вложености
    * orders/admin.py
        * список заказов со статусами и суммами
        * inline формы для позиций заказа
    * users/admin.py
* через админку можно полноценно управлять товарами категориями заказами и пользователями
#### 7. Тестирование и доработка
* координировал процесс исправления ошибок
    * анализировал проблемы найденые при тестировании и использовании
    * дорабатывал модели настройки и взаимодействие между приложениями
    * проверял чтобы изменения не ломали существующую логику

### разработчик
#### 1. Статика и шаблоны
* организовал структуру статических файлов
    * static/deps/css bootstrap и кастомные стили
    * static/deps/js jquery bootstrap js и свои скрипты
    * static/deps/icons favicon images
* настроил подключение статики в шаблонах
* разработал и доработал основные шаблоны интерфейса
    * templates/base.html
        * шапка меню логин регистрация профиль
    * main/templates/main/index.html
        * кнопки каталог и корзина
    * main/templates/main/about.html
    * шаблоны каталога и карточки товара
        * goods/templates/goods/catalog.html
        * product.html
    * шаблоны авторзации и профиля
        * users/templates/users/*.html
    * элементы корзины
        * cart_button.html
        * carts/includes/included_cart.html
#### 2. Оформление заказа
* реализовал фронт и бэк часть оформления заказа в orders
    * формы orders/forms.py
        * контактные данные
        * адрес доставки или самовывоза
        * валидация обязательных полей
    * views orders/views.py
        * получение теукщей корзины пользователя
        * создание заказа и позиций заказа на основе корзины
        * перерасчет итоговой суммы
        * очистка корзины после успешного оформления
* сверстал и связал шаблон orders/templates/orders/create_order.html
    * форма ввода данных
    * список товаров из корзины
    * итоговая сумма
    * сообщения об успехе или ошибке
#### 3. Пагинация и фильтры
* настроил пагинацию каталога
    * логика разбиения на страницы в goods/views.py
    * передача параметров страниц в шаблон
    * навигация по страницам в catalog.html
* реализовал фильры каталога
    * фильтрация по категориям
    * фильтры по параметрам например по цене
    * интеграция с интерфейсом
        * select чекбоксы и другие элементы
        * корректная передача параметров в запросах
#### 4. Поиск и наполнение базы
* доработал поиск товаров
    * поиск по названию описанию и другим полям
    * корректная передача поискового запроса из формы
    * совместная работа поиска с пагинацией и фильтрами
* занимался наполнением базы через orm и фикстуры
    * создание и редактирование товаров и категорий
    * проверка отображения в каталоге и карточках
    * при необходимости правка моделей под нужные данные
#### x5. Тестирование и участие в фиксе багов
* проводил ручное тестирование интерфейса
    * каталог фильтры поиск пагинация
    * корзина и оформление заказа
* прогонял основные пользовательские сценарии
    * регистрация
    * логин
    * добавление товаров в корзину
    * оформление заказа
    * просмотр заказов в профиле
* совместно с лид разработчиком
    * исправлял ошибки в шаблонах статиках и views
    * улучшал ux подсказки сообщения об ошибках и подсветку активных элементов


